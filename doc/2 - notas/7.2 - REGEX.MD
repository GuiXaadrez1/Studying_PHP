# Introdu√ß√£o
Para aprimorar filtragens e principalmente quando √© filtragem de strings, o REGEX ajuda bastante, ent√£o, este documento
visa explicar, informar o funcionamento do REGEX de forma clara e intuitiva.

## O que √© Regex

Regex (Regular Expression) √© uma linguagem de padr√£o de texto para descrever e identificar strings que seguem um formato espec√≠fico.
Ela permite validar, buscar, substituir ou extrair dados textuais complexos.

## SINTAXE GERAL
```php
<?php
    $padrao = '/abc/';
?>
```

Observa√ß√£o:

/: delimitadores.

abc: padr√£o literal


## Metacaracteres principais

metacaracteres s√£o caracteres especiais na sintaxe de Regex ‚Äî n√£o s√£o literais, mas controlam o comportamento do padr√£o.

Eles s√£o os ‚Äúoperadores‚Äù da Regex, definindo:

O que √© opcional

O que √© repetido

Onde come√ßa ou termina

Que tipo de caractere pode aparecer

Sem metacaracteres, regex seria s√≥ texto literal.

### Tabela dos principais s√≠mbolos

| S√≠mbolo | O que faz                                |           |
| ------- | ---------------------------------------- | --------- |
| `.`     | Qualquer caractere **exceto nova linha** |           |
| `^`     | In√≠cio da string                         |           |
| `$`     | Fim da string                            |           |
| `[]`    | Classe de caracteres                     |           |
| \`      | \`                                       | OU l√≥gico |
| `()`    | Agrupamento                              |           |
| `\`     | Escape                                   |           |


EXEMPLO:

```php
<?php

    echo "### REGEX METACARACTERES DEMO ###\n\n";

    // 1Ô∏è‚É£ Ponto (.)
    $pattern = '/c.t/';
    $subject = 'cat cot cut c t c2t';
    preg_match_all($pattern, $subject, $matches);
    echo "1Ô∏è‚É£ Ponto (.): ";
    print_r($matches[0]);

    // 2Ô∏è‚É£ Circunflexo (^)
    $pattern = '/^abc/';
    $subject = 'abcdef';
    preg_match($pattern, $subject, $matches);
    echo "2Ô∏è‚É£ Circunflexo (^): ";
    print_r($matches);

    // 3Ô∏è‚É£ Cifr√£o ($)
    $pattern = '/xyz$/';
    $subject = '123xyz';
    preg_match($pattern, $subject, $matches);
    echo "3Ô∏è‚É£ Cifr√£o ($): ";
    print_r($matches);

    // 4Ô∏è‚É£ Colchetes ([])
    $pattern = '/b[aeiou]t/';
    $subject = 'bat bet bit bot but bxt';
    preg_match_all($pattern, $subject, $matches);
    echo "4Ô∏è‚É£ Colchetes ([]): ";
    print_r($matches[0]);

    // 5Ô∏è‚É£ Barra vertical (|)
    $pattern = '/foo|bar/';
    $subject = 'foo barbar foo bar';
    preg_match_all($pattern, $subject, $matches);
    echo "5Ô∏è‚É£ Barra vertical (|): ";
    print_r($matches[0]);

    // 6Ô∏è‚É£ Par√™nteses (())
    $pattern = '/(abc)+/';
    $subject = 'abcabcabc xyz';
    preg_match($pattern, $subject, $matches);
    echo "6Ô∏è‚É£ Par√™nteses ( () ): ";
    print_r($matches);

    // 7Ô∏è‚É£ Escape (\)
    $pattern = '/\./'; // ponto literal
    $subject = 'arquivo.txt';
    preg_match($pattern, $subject, $matches);
    echo "7Ô∏è‚É£ Escape (\\): ";
    print_r($matches);

    echo "\n### FIM ###\n";

?>
```

SAIDA:

```csharp
###  SAIDA REGEX METACARACTERES DEMO ###

    1Ô∏è‚É£ Ponto (.): Array
    (
        [0] => cat
        [1] => cot
        [2] => cut
        [3] => c t
        [4] => c2t
    )

    2Ô∏è‚É£ Circunflexo (^): Array
    (
        [0] => abc
    )

    3Ô∏è‚É£ Cifr√£o ($): Array
    (
        [0] => xyz
    )

    4Ô∏è‚É£ Colchetes ([]): Array
    (
        [0] => bat
        [1] => bet
        [2] => bit
        [3] => bot
        [4] => but
    )

    5Ô∏è‚É£ Barra vertical (|): Array
    (
        [0] => foo
        [1] => bar
        [2] => foo
        [3] => bar
    )

    6Ô∏è‚É£ Par√™nteses ( () ): Array
    (
        [0] => abcabcabc
        [1] => abc
    )

    7Ô∏è‚É£ Escape (\): Array
    (
        [0] => .
    )

    ### FIM ###

```

## Quantificadores

indicam, quantas vezes o elemento anterior deve se repetir para bater o padr√£o.

| Quantificador | Significado        | Exemplo l√≥gico                              |
| ------------- | ------------------ | ------------------------------------------- |
| `*`           | 0 ou mais          | `a*` ‚Üí casa: "", "a", "aa", "aaa"...        |
| `+`           | 1 ou mais          | `a+` ‚Üí casa: "a", "aa", "aaa"... mas n√£o "" |
| `?`           | 0 ou 1             | `a?` ‚Üí casa: "", "a"                        |
| `{n}`         | Exatamente n vezes | `a{3}` ‚Üí casa: "aaa"                        |
| `{n,}`        | n ou mais          | `a{2,}` ‚Üí "aa", "aaa", "aaaa"...            |
| `{n,m}`       | Entre n e m vezes  | `a{2,4}` ‚Üí "aa", "aaa", "aaaa"              |


EXEMPLO:

```php
<?php

    echo "### REGEX QUANTIFICADORES DEMO ###\n\n";

    // 1Ô∏è‚É£ Asterisco (*) - 0 ou mais
    $pattern = '/ba*/';
    $subject = 'b ba baa baaa';
    preg_match_all($pattern, $subject, $matches);
    echo "1Ô∏è‚É£ * (0 ou mais): ";
    print_r($matches[0]);

    // 2Ô∏è‚É£ Mais (+) - 1 ou mais
    $pattern = '/ba+/';
    $subject = 'b ba baa baaa';
    preg_match_all($pattern, $subject, $matches);
    echo "2Ô∏è‚É£ + (1 ou mais): ";
    print_r($matches[0]);

    // 3Ô∏è‚É£ Interroga√ß√£o (?) - 0 ou 1
    $pattern = '/ba?/';
    $subject = 'b ba baa baaa';
    preg_match_all($pattern, $subject, $matches);
    echo "3Ô∏è‚É£ ? (0 ou 1): ";
    print_r($matches[0]);

    // 4Ô∏è‚É£ Chave {n} - exatamente n
    $pattern = '/ba{2}/';
    $subject = 'b ba baa baaa baaaa';
    preg_match_all($pattern, $subject, $matches);
    echo "4Ô∏è‚É£ {n} (exato): ";
    print_r($matches[0]);

    // 5Ô∏è‚É£ Chave {n,} - n ou mais
    $pattern = '/ba{2,}/';
    $subject = 'b ba baa baaa baaaa';
    preg_match_all($pattern, $subject, $matches);
    echo "5Ô∏è‚É£ {n,} (n ou mais): ";
    print_r($matches[0]);

    // 6Ô∏è‚É£ Chave {n,m} - entre n e m
    $pattern = '/ba{2,3}/';
    $subject = 'b ba baa baaa baaaa';
    preg_match_all($pattern, $subject, $matches);
    echo "6Ô∏è‚É£ {n,m} (entre n e m): ";
    print_r($matches[0]);

    // 7Ô∏è‚É£ Lazy match
    $pattern = '/<.*?>/';
    $subject = '<a>foo</a><b>bar</b>';
    preg_match_all($pattern, $subject, $matches);
    echo "7Ô∏è‚É£ Lazy (*?): ";
    print_r($matches[0]);

    echo "\n### FIM ###\n";

?>
```

SAIDA:

```csharp

    ### REGEX QUANTIFICADORES DEMO ###

    1Ô∏è‚É£ * (0 ou mais): Array
    (
        [0] => b
        [1] => ba
        [2] => baa
        [3] => baaa
    )

    2Ô∏è‚É£ + (1 ou mais): Array
    (
        [0] => ba
        [1] => baa
        [2] => baaa
    )

    3Ô∏è‚É£ ? (0 ou 1): Array
    (
        [0] => b
        [1] => ba
        [2] => ba
        [3] => ba
    )

    4Ô∏è‚É£ {n} (exato): Array
    (
        [0] => baa
    )

    5Ô∏è‚É£ {n,} (n ou mais): Array
    (
        [0] => baa
        [1] => baaa
        [2] => baaaa
    )

    6Ô∏è‚É£ {n,m} (entre n e m): Array
    (
        [0] => baa
        [1] => baaa
    )

    7Ô∏è‚É£ Lazy (*?): Array
    (
        [0] => <a>
        [1] => </a>
        [2] => <b>
        [3] => </b>
    )

    ### FIM ###

```

## Classes de caracteres

Uma classe de caracteres define um conjunto de poss√≠veis caracteres que uma posi√ß√£o na string pode ter.

üìå Exemplo:
    [abc] ‚Üí casa um √∫nico caractere que seja a, b ou c.

√â como dizer:
    ‚ÄúNeste ponto, qualquer um desses serve.‚Äù


| Sintaxe  | Significado                                 | Exemplo                     |
| -------- | ------------------------------------------- | --------------------------- |
| `[abc]`  | Um √∫nico `a`, `b` ou `c`                    | `b[aeiou]t` ‚Üí bat, bet, bit |
| `[^abc]` | Qualquer caractere **exceto** `a`, `b`, `c` | `[^0-9]` ‚Üí n√£o d√≠gito       |
| `[a-z]`  | Letra min√∫scula `a` a `z`                   | `[A-Z]` ‚Üí mai√∫sculas        |
| `[0-9]`  | D√≠gito de 0 a 9                             |                             |
| `\d`     | **Atalho** pra `[0-9]`                      |                             |
| `\D`     | N√£o d√≠gito                                  |                             |
| `\w`     | Palavra: `[A-Za-z0-9_]`                     |                             |
| `\W`     | N√£o palavra                                 |                             |
| `\s`     | Espa√ßo em branco (tab, espa√ßo, nova linha)  |                             |
| `\S`     | N√£o espa√ßo                                  |                             |



EXEMPLO:

```php
<?php
    echo "### REGEX CLASSES DE CARACTERES DEMO ###\n\n";

    // 1Ô∏è‚É£ Inclusiva: [aeiou]
    $pattern = '/b[aeiou]t/';
    $subject = 'bat bet bit bot but bxt b1t';
    preg_match_all($pattern, $subject, $matches);
    echo "1Ô∏è‚É£ [aeiou]: ";
    print_r($matches[0]);

    // 2Ô∏è‚É£ Exclusiva: [^0-9]
    $pattern = '/[^0-9]+/';
    $subject = 'abc 123 xyz';
    preg_match_all($pattern, $subject, $matches);
    echo "2Ô∏è‚É£ [^0-9]: ";
    print_r($matches[0]);

    // 3Ô∏è‚É£ Intervalo: [a-z]
    $pattern = '/[a-z]+/';
    $subject = 'abc DEF 123';
    preg_match_all($pattern, $subject, $matches);
    echo "3Ô∏è‚É£ [a-z]: ";
    print_r($matches[0]);

    // 4Ô∏è‚É£ \d (d√≠gito)
    $pattern = '/\d+/';
    $subject = 'abc 123 xyz 456';
    preg_match_all($pattern, $subject, $matches);
    echo "4Ô∏è‚É£ \\d: ";
    print_r($matches[0]);

    // 5Ô∏è‚É£ \D (n√£o d√≠gito)
    $pattern = '/\D+/';
    $subject = '123abc456';
    preg_match_all($pattern, $subject, $matches);
    echo "5Ô∏è‚É£ \\D: ";
    print_r($matches[0]);

    // 6Ô∏è‚É£ \w (palavra)
    $pattern = '/\w+/';
    $subject = 'abc 123 _foo bar!';
    preg_match_all($pattern, $subject, $matches);
    echo "6Ô∏è‚É£ \\w: ";
    print_r($matches[0]);

    // 7Ô∏è‚É£ \W (n√£o palavra)
    $pattern = '/\W+/';
    $subject = 'abc 123 _foo bar!';
    preg_match_all($pattern, $subject, $matches);
    echo "7Ô∏è‚É£ \\W: ";
    print_r($matches[0]);

    // 8Ô∏è‚É£ \s (espa√ßo)
    $pattern = '/\s+/';
    $subject = "abc \t def \n xyz";
    preg_match_all($pattern, $subject, $matches);
    echo "8Ô∏è‚É£ \\s: ";
    print_r($matches[0]);

    // 9Ô∏è‚É£ \S (n√£o espa√ßo)
    $pattern = '/\S+/';
    $subject = "abc \t def \n xyz";
    preg_match_all($pattern, $subject, $matches);
    echo "9Ô∏è‚É£ \\S: ";
    print_r($matches[0]);

    echo "\n### FIM ###\n";
?>
```
SAIDA:

```csharp

### REGEX CLASSES DE CARACTERES DEMO ###

    1Ô∏è‚É£ [aeiou]: Array
    (
        [0] => bat
        [1] => bet
        [2] => bit
        [3] => bot
        [4] => but
    )

    2Ô∏è‚É£ [^0-9]: Array
    (
        [0] => abc 
        [1] =>  xyz
    )

    3Ô∏è‚É£ [a-z]: Array
    (
        [0] => abc
    )

    4Ô∏è‚É£ \d: Array
    (
        [0] => 123
        [1] => 456
    )

    5Ô∏è‚É£ \D: Array
    (
        [0] => 
        [1] => abc
    )

    6Ô∏è‚É£ \w: Array
    (
        [0] => abc
        [1] => 123
        [2] => _foo
        [3] => bar
    )

    7Ô∏è‚É£ \W: Array
    (
        [0] =>  
        [1] =>  
        [2] => !
    )

    8Ô∏è‚É£ \s: Array
    (
        [0] =>  
        [1] => 	 
        [2] =>  
        [3] => 
    )
    9Ô∏è‚É£ \S: Array
    (
        [0] => abc
        [1] => def
        [2] => xyz
    )

    ### FIM ###

```

##  √Çncoras

√Çncoras n√£o casam caracteres, mas sim posi√ß√µes dentro do texto:

In√≠cio

Fim

Limites de palavra

Limites de n√£o-palavra

Ou seja: elas ‚Äúprendem‚Äù seu padr√£o em um lugar espec√≠fico.


| S√≠mbolo | O que faz             |
| ------- | --------------------- |
| `^`     | In√≠cio da string      |
| `$`     | Fim da string         |
| `\b`    | Limite de palavra     |
| `\B`    | N√£o limite de palavra |


EXEMPLO:

```php
<?php

    echo "### REGEX √ÇNCORAS DEMO ###\n\n";

    // 1Ô∏è‚É£ In√≠cio (^)
    $pattern = '/^abc/';
    $subject = 'abcdef abc defabc';
    preg_match_all($pattern, $subject, $matches);
    echo "1Ô∏è‚É£ ^ In√≠cio: ";
    print_r($matches[0]);

    // 2Ô∏è‚É£ Fim ($)
    $pattern = '/abc$/';
    $subject = 'abc defabc abc';
    preg_match_all($pattern, $subject, $matches);
    echo "2Ô∏è‚É£ $ Fim: ";
    print_r($matches[0]);

    // 3Ô∏è‚É£ Limite de palavra (\b)
    $pattern = '/\bcat\b/';
    $subject = 'the cat catalog bobcat cat';
    preg_match_all($pattern, $subject, $matches);
    echo "3Ô∏è‚É£ \\b Limite de palavra: ";
    print_r($matches[0]);

    // 4Ô∏è‚É£ N√ÉO-limite de palavra (\B)
    $pattern = '/\Bcat\B/';
    $subject = 'bobcat cat catnap';
    preg_match_all($pattern, $subject, $matches);
    echo "4Ô∏è‚É£ \\B N√ÉO-limite de palavra: ";
    print_r($matches[0]);

    echo "\n### FIM ###\n";

?>
```

SAIDA:

```csharp

    ### REGEX √ÇNCORAS DEMO ###

    1Ô∏è‚É£ ^ In√≠cio: Array
    (
        [0] => abc
    )

    2Ô∏è‚É£ $ Fim: Array
    (
        [0] => abc
    )

    3Ô∏è‚É£ \b Limite de palavra: Array
    (
        [0] => cat
        [1] => cat
    )

    4Ô∏è‚É£ \B N√ÉO-limite de palavra: Array
    (
        [0] => cat
    )

    ### FIM ###

```

## Grupos e captura

### O que s√£o Grupos

üëâ Grupos ((...)) servem pra agrupar partes do padr√£o.

S√£o usados pra aplicar quantificadores a mais de um caractere.

Ou pra criar subpadr√µes alternativos.

üìå Exemplo: (ab)+ ‚Üí casa ab, abab, ababab‚Ä¶

### O que s√£o Grupos de Captura

Quando voc√™ usa (...):

O conte√∫do casado fica armazenado ‚Üí voc√™ pode acessar depois.

Cada (...) gera um grupo numerado: $matches[1], $matches[2]‚Ä¶

### Tipos de Grupo

| Sintaxe        | Nome              | Pra qu√™ serve             |
| -------------- | ----------------- | ------------------------- |
| `(abc)`        | Grupo de Captura  | Agrupa + captura valor    |
| `(?:abc)`      | Grupo N√£o-Captura | Agrupa mas **n√£o guarda** |
| `(?<nome>abc)` | Grupo Nomeado     | Captura com **nome**      |

Exemplo l√≥gico:

```php
<?php
    $pattern = '/(\d{2})\/(\d{2})\/(\d{4})/';
    $subject = 'Hoje √© 14/07/2025';
    preg_match($pattern, $subject, $matches);
?>
```

Resultado:

```php
<?php
    $matches[0] = "14/07/2025"  // total
    $matches[1] = "14"          // dia
    $matches[2] = "07"          // m√™s
    $matches[3] = "2025"        // ano
?>
```

###  Grupo N√ÉO-Captura

```php
<?php
    $pattern = '/(?:ab)+/';
?>
```

Agrupa, mas n√£o cria $matches[1].

√ötil pra performance se voc√™ n√£o precisa armazenar.

### Grupo Nomeado

Exemplo:

```php
<?php
    $pattern = '/(?<dia>\d{2})\/(?<mes>\d{2})\/(?<ano>\d{4})/';
    preg_match($pattern, '14/07/2025', $matches);
?>
```

Resultado: 

```php
<?php
    $matches['dia'] = "14"
    $matches['mes'] = "07"
    $matches['ano'] = "2025"
?>
```

## Usando fun√ß√µes nativas que auxiliam durante o Regex no PHP


### Resumo de fun√ß√µes Regex PHP

| Fun√ß√£o                  | O que faz                        |
| ----------------------- | -------------------------------- |
| `preg_match`            | Procura **1 ocorr√™ncia**         |
| `preg_match_all`        | Procura **todas as ocorr√™ncias** |
| `preg_replace`          | Substitui                        |
| `preg_split`            | Divide                           |
| `preg_grep`             | Filtra arrays com regex          |
| `preg_replace_callback` | Substitui usando fun√ß√£o callback |


### EXEMPLOS

üîπ preg_match (Verifica se bate).

```php
<?php
    $pattern = '/^abc/';
    $subject = 'abcdef';

    if (preg_match($pattern, $subject)) {
    echo "Bateu!";
    }
?>
```

üîπ preg_replace (Substitui).

```php
<?php
    $pattern = '/[0-9]+/';
    $replace = '#';
    $subject = 'abc123def456';

    echo preg_replace($pattern, $replace, $subject); // abc#def#
?>
```

üîπ preg_split (Divide uma string).

```php
<?php
    $pattern = '/\s+/';
    $subject = 'O Rick e o Morty';

    $result = preg_split($pattern, $subject);
    print_r($result);
    // ['O', 'Rick', 'e', 'o', 'Morty']
?>
```

üîπ Grupos de captura

```php
<?php
    $pattern = '/(\d{2})\/(\d{2})\/(\d{4})/';
    $subject = 'Hoje √© 14/07/2025';

    if (preg_match($pattern, $subject, $matches)) {
    var_dump($matches);
    // [0] => 14/07/2025
    // [1] => 14
    // [2] => 07
    // [3] => 2025
    }
?>
```

## Dicas 

‚úîÔ∏è Teste regex em regex101.com ‚Äî facilita entender grupos e matches.

‚úîÔ∏è Use delimitadores claros: /.../ ou #...# se a barra / estiver no padr√£o.

‚úîÔ∏è Para flags: i (case-insensitive), m (multiline).

```php
<?php
    $pattern = '/abc/i'; // ignora mai√∫sculas/min√∫sculas
?>
```

## ‚ö†Ô∏è Armadilhas comuns:
‚ùå Usar .* sem cuidado ‚Üí pode pegar tudo e mais um pouco (ganancioso).

‚úÖ Prefira +? ou *? para lazy matching.

## Exemplo final aplicado

Validar email com Regex (n√£o usando filter)

```php
<?php
    $email = 'rick@email.com';
    $pattern = '/^[\w\.\-]+@[\w\-]+\.[a-z]{2,6}$/i';

    if (preg_match($pattern, $email)) {
        echo "Email v√°lido por Regex!";
    } else {
        echo "Inv√°lido!";
    }
?>
```

## ‚úÖ Quando usar Regex

Valida√ß√µes avan√ßadas (CNPJ, CPF, datas, placas).

Extra√ß√£o de dados em logs.

Busca avan√ßada em strings.

Substitui√ß√µes complexas.