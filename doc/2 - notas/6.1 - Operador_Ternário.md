# Introdu√ß√£o

Este documento visa explicar melhor como trabalhar com operadores tern√°rios e suas variantes (Elvis e )


## Conceito de  falsy e truthy

### ‚úÖ O que √© Truthy e Falsy?

Em linguagens din√¢micas como PHP, JavaScript, Python, etc., nem tudo √© explicitamente true ou false ‚Äî mas qualquer valor pode ser avaliado como true ou false dentro de uma express√£o booleana.

### Defini√ß√£o curta

| Termo      | Significado                                                                       |
| ---------- | --------------------------------------------------------------------------------- |
| **Truthy** | Qualquer valor que, quando avaliado em contexto booleano, √© tratado como `true`.  |
| **Falsy**  | Qualquer valor que, quando avaliado em contexto booleano, √© tratado como `false`. |


### Exemplo pr√°tico:

```php
<?php
    if ($x) {
    echo "√â truthy!";
    } else {
    echo "√â falsy!";
    }
?>
```

O PHP converte $x implicitamente pra bool.
Dependendo do valor, ele cai pra true (truthy) ou false (falsy).

### Valores Falsy em PHP

No PHP, os seguintes valores s√£o falsy:

| Valor                | Por qu√™               |
| -------------------- | --------------------- |
| `false`              | Literalmente `false`  |
| `0` (int)            | Zero inteiro          |
| `0.0` (float)        | Zero float            |
| `''` (string vazia)  | Vazio √© `false`       |
| `'0'` (string `'0'`) | Tamb√©m √© `false`      |
| `[]` (array vazio)   | Nada dentro ‚Üí `false` |
| `null`               | Aus√™ncia de valor     |


---

### Valores Truthy em PHP


Qualquer coisa que n√£o seja um dos falsy acima √© truthy.

Exemplos:

    true ‚Üí truthy.

    Qualquer n√∫mero n√£o zero: 1, -5, 0.0001 ‚Üí truthy.

    Strings com conte√∫do: 'abc', 'false', '0.1' ‚Üí truthy.

    Arrays n√£o vazios: [1, 2] ‚Üí truthy.

    Objetos ‚Üí sempre truthy.

---

### Tabela resumida 


| Valor            | Resultado booleano |
| ---------------- | ------------------ |
| `false`          | Falsy              |
| `0`              | Falsy              |
| `'0'`            | Falsy              |
| `0.0`            | Falsy              |
| `''`             | Falsy              |
| `[]`             | Falsy              |
| `null`           | Falsy              |
| **Todo o resto** | Truthy             |


---

### ‚úÖ Por que isso existe?

Pra simplificar l√≥gica:

```php

<?php

    if ($_POST['email']) {
   echo "Tem email!";
}
?>
```

Se $_POST['email'] n√£o existe ou √© '' ‚Üí falsy.

Se tem algo dentro ‚Üí truthy.

Voc√™ n√£o precisa fazer != '' && != null ‚Äî o PHP faz isso pra voc√™


### ‚ö†Ô∏è Pegadinha cl√°ssica
Zero (0) √© falsy!

```php
<?php

    $numero = 0;
    if ($numero) { 
    echo "√â truthy!"; 
    } else { 
    echo "√â falsy!"; // Vai cair aqui
    }

?>
```

Por isso cuidado usando ?: se 0 for valor v√°lido!

### ‚úÖ Como converter explicitamente

```php
<?php
    $bool = (bool) $variavel; // for√ßa cast
?>
```

Ou ativar o modo: 

```php
<?php 
    declare(strict_types=1); # DECLRAR SEMPRE NO TOPO, OU SEJA NA PRIMEIRA LINHA!
    // instru√ß√µes 
?>
```
---

### Resumo 

| Conceito    | O que significa                                       |
| ----------- | ----------------------------------------------------- |
| *Truthy*    | Valor interpretado como `true` em express√£o booleana  |
| *Falsy*     | Valor interpretado como `false` em express√£o booleana |
| Import√¢ncia | Evita ifs longos, limpa checagens                     |
| Cuidados    | `0`, `'0'`, `''` e `null` s√£o falsy                   |


## O que √© um Operador tern√°rio? 

O operador tern√°rio √© uma estrutura condicional compacta que avalia uma express√£o booleana e retorna um de dois valores poss√≠veis,
dependendo se a condi√ß√£o √© verdadeira ou falsa. Ou seja, √© basicamente um if e else resumido.

### Por que o nome ‚Äútern√°rio‚Äù?

‚ÄúTern√°rio‚Äù vem de ‚Äútr√™s‚Äù.

O operador precisa de tr√™s partes:

    condi√ß√£o ? valor_se_verdadeiro : valor_se_falso

| Pe√ßa       | Significado                                      |
| ---------- | ------------------------------------------------ |
| `condi√ß√£o` | Express√£o a ser avaliada como `true` ou `false`  |
| `?`        | Inicia o **bloco verdadeiro**                    |
| `:`        | Separa o **bloco verdadeiro** do **bloco falso** |


### ‚öôÔ∏è Forma expandida

Ele √© um atalho para if-else de uma linha:

```php
<?php

    $variavel = ($idade >= 18) ? 'Maior de idade' : 'Menor de idade';

?>
```

‚¨áÔ∏è Equivalente a:

```php
<?php
if ($idade >= 18) {
    $variavel = 'Maior de idade';
} else {
    $variavel = 'Menor de idade';
}
?>
```

Exemplo Pr√°tico Simples:

```php
<?php

    $nota = 7;
    echo ($nota >= 6) ? "Aprovado" : "Reprovado";
    // Sa√≠da: "Aprovado"
?>
```
Exemplo Pr√°tico mais complexo:

```php
<?php
    function funcaoOperadorTernario($Resultado = true ):bool {
        try{
            if(is_bool($Resultado)){
                echo ($Resultado == true) ? 'true' : 'false'; # <-Nosso Operador Tern√°rio
                return $Resultado;
            }else{
                echo "N√£o √© booleano!";
                return false;
            };  
        }catch(Throwable $e){
            echo("Aconteceu algum erro aqui: ". $e->getMessage());
            return true;
        };
    };
?>
```

###  √â um operador, n√£o uma fun√ß√£o

Executado em tempo de avalia√ß√£o.

N√£o chama fun√ß√£o ‚Äî √© puro syntax sugar.

√â mais r√°pido para condi√ß√µes simples.

## üîë Quando usar?

‚úÖ Quando a decis√£o √© simples (uma atribui√ß√£o curta).
‚úÖ Para express√µes inline, como echo.
‚ùå Evite para l√≥gicas complexas ou aninhadas ‚Äî fica ileg√≠vel.


## O que √© o Elvis Operator (?:) (Variante do Operador Tern√°rio)

O Elvis Operator √© uma vers√£o resumida do operador tern√°rio, criada para o caso espec√≠fico em que o valor de fallback √© usado quando a express√£o da esquerda √© falsy.
Ele foi introduzido no PHP 5.3 e serve para simplificar express√µes condicionais.

Curiosidade: 

    O operador ?: √© chamado de Elvis porque visualmente lembra o topete do Elvis Presley ‚Äî s√©rio! Veja: ?: parece um rostinho com cabelo estiloso

Sintaxe B√°sica:

```php
<?php

    $resultado = $valor ?: 'alternativa';

?>
```

Isso significa:

- Se $valor for truthy (ou seja, n√£o √© false, 0, '', null, etc.), ent√£o $resultado recebe $valor.

- Caso contr√°rio, recebe 'alternativa'.

‚¨áÔ∏è √â equivalente a:

```php
<?php
    $resultado = $valor ? $valor : 'alternativa';
?>
```

### ‚ö†Ô∏è Cuidados importantes

O Elvis Operator avalia apenas uma vez o primeiro operando, diferente do tern√°rio completo que pode avaliar duas vezes.

Ele considera qualquer valor "falsy" como falso ‚Äî incluindo 0, '', false, null, etc.

Isso pode causar surpresas se voc√™ quiser preservar valores como 0 ou false


### Uso comum: higieniza√ß√£o de vari√°veis

Imagine que voc√™ quer garantir que uma vari√°vel tenha um valor padr√£o se estiver vazia:

```php
<?php

    $nome = $nome ?: 'Convidado';
    $quantidade = $quantidade ?: 0;

?>
```

Isso √© √∫til para evitar ifs desnecess√°rios e deixar o c√≥digo mais limpo

### Exemplo simples:

```php
<?php
    $nome = get_user_name() ?: 'Convidado';
?>
```

Se get_user_name() retornar algo como null ou '', ent√£o $nome ser√° 'Convidado'.

## Quando usar o Elvis Operator (?:)

Para retornar um valor alternativo se o original for falsy ('', 0, false, null).

Para exibir texto de fallback (ex.: echo $nome ?: 'An√¥nimo';).

Para reduzir if/else simples numa linha.

Para simplificar tern√°rio redundante ($x = $x ?: 'default';).

Para exibir valores opcionais em views/templates.

Para lidar com campos de formul√°rios vazios ($_POST['campo'] ?: 'sem valor').


## Quando n√£o o Elvis Operator (?:)

Quando **0 √© um valor v√°lido ‚Äî porque 0 √© falsy.

Quando o valor pode n√£o existir ‚Äî use ?? para evitar NOTICE.

Quando voc√™ precisa distinguir null de 0, '' ou false.

Para l√≥gicas mais complexas ‚Äî a√≠ use o tern√°rio completo ? :.

Para m√∫ltiplos fallback em cadeia ‚Äî prefira ??.


## O que √© Null Coalesce Operator (??) (Variante do Operador Tern√°rio)

O ?? foi introduzido no PHP 7.0 e serve para verificar se uma vari√°vel est√° definida e n√£o √© null. 
Se estiver, retorna seu valor; caso contr√°rio, retorna um valor padr√£o.

Sintaxe B√°sica:

```php
<?php
    $variavel = $valor ?? 'padr√£o';
>
```

- Se $valor estiver definido e n√£o for null, $variavel recebe $valor.

- Caso contr√°rio, $variavel recebe 'padr√£o'.

### Exemplos pr√°ticos

```php
<?php
    $nome = $_POST['nome'] ?? 'Visitante';
?>
```

- Se o campo nome n√£o tiver sido enviado no formul√°rio, $nome ser√° 'Visitante'.

```php
<?php
    $idade = $dados['idade'] ?? 18;
?>
```

## Encadeamento de ??

Voc√™ pode usar v√°rios ?? em sequ√™ncia:

```php
<?php

    $usuario = $nomeCompleto ?? $apelido ?? 'An√¥nimo';
?>
```

- O PHP vai verificar cada vari√°vel da esquerda para a direita e retornar a primeira que estiver definida e n√£o for null.

## Vers√£o com atribui√ß√£o: ??=

partir do PHP 7.4, voc√™ pode usar o operador de atribui√ß√£o coalescente:

```php
<?php

    $contador ??= 0;
?>
```

- Isso significa: se $contador n√£o estiver definido ou for null, ele ser√° definido como 0.


## Quando Usar o Null Coalesce Operator (??)

Quando a vari√°vel pode n√£o estar definida (evita NOTICE de ‚Äúundefined‚Äù).

```php
<?php   
    $valor = $config['opcao'] ?? 'padr√£o';
?>
```

- Quando precisa de fallback apenas se o valor for null ou n√£o existir.

```php
<?php
    $id = $_GET['id'] ?? 0;
?>
```

- Para encadear m√∫ltiplos fallback de forma limpa:

```php
<?php
    $resposta = $a ?? $b ?? $c ?? 'default';
?>
```

- Para trabalhar com arrays onde a chave pode faltar.

```php
<?php
    echo $dados['nome'] ?? 'Sem Nome';
?>
```
- Para APIs ou vari√°veis de configura√ß√£o opcional:

```php
<?php
    $timeout = $userConfig['timeout'] ?? $defaultTimeout;
?>
```

- Para substituir isset() de forma mais leg√≠vel:

```php
<?php
    // Ao inv√©s de:
    $x = isset($y) ? $y : 'default';
    
    // Use:
    $x = $y ?? 'default';
?>
```

## Quando N√£o Usar 

- Quando o valor pode existir, mas pode ser '' ou 0, e isso √© v√°lido. ?? n√£o trata falsy ‚Äî s√≥ null ou n√£o definido.

```php
<?php   
    $num = 0;
    $res = $num ?? 10; // $res = 0, sem fallback
?>
```

- Quando precisa tratar falsy gen√©rico ('', 0, false) ‚Üí a√≠ use o Elvis ?:.

```php
<?php

    echo $nome ?: 'Sem Nome'; // Para strings vazias

?>
```

Para l√≥gicas condicionais complexas ‚Üí use tern√°rio ? :.

Quando j√° tem certeza que a vari√°vel est√° definida e n√£o √© null ‚Äî usar ?? vira ru√≠do desnecess√°rio.


## TABELA COMPARATIVA

| Caracter√≠stica                          | **Operador Tern√°rio `? :`**                | **Elvis Operator `?:`**          | **Null Coalesce `??`**                                |
| --------------------------------------- | ------------------------------------------ | -------------------------------- | ----------------------------------------------------- |
| **Forma**                               | `condi√ß√£o ? valor1 : valor2`               | `vari√°vel ?: fallback`           | `vari√°vel ?? fallback`                                |
| **Partes**                              | 3 (condi√ß√£o, se verdadeiro, se falso)      | 2 (vari√°vel, fallback)           | 2 (vari√°vel, fallback)                                |
| **Avalia√ß√£o**                           | Avalia uma **condi√ß√£o booleana expl√≠cita** | Verifica se **vari√°vel √© falsy** | Verifica se **vari√°vel est√° definida e n√£o √© `null`** |
| **Considera `0` falsy?**                | Depende da condi√ß√£o                        | ‚úÖ Sim (0 √© falsy)                | ‚ùå N√£o (0 √© v√°lido)                                    |
| **Considera `''` falsy?**               | Depende da condi√ß√£o                        | ‚úÖ Sim                            | ‚ùå N√£o                                                 |
| **Gera aviso se vari√°vel n√£o existir?** | ‚úÖ Sim                                      | ‚úÖ Sim                            | ‚ùå N√£o                                                 |
| **Vers√£o m√≠nima do PHP**                | 4+                                         | 5.3+                             | 7+                                                    |
| **Uso t√≠pico**                          | Substituir `if/else` em uma linha          | Fallback r√°pido para falsy       | Fallback quando pode n√£o existir ou ser `null`        |
| **Exemplo**                             | `$x > 10 ? 'A' : 'B'`                      | `$foo ?: 'Padr√£o'`               | `$foo ?? 'Padr√£o'`                                    |
| **Fallback de m√∫ltiplos n√≠veis?**       | N√£o nativo                                 | N√£o nativo                       | ‚úÖ Sim (`$a ?? $b ?? $c`)                              |
| **Boa pr√°tica**                         | Express√µes curtas                          | Substituir tern√°rio redundante   | Substituir `isset()` encadeado                        |

--- 

## Resumo R√°pido

| Operador             | Quando usar                                                           |
| -------------------- | --------------------------------------------------------------------- |
| `? :` (tern√°rio)     | Decis√£o booleana expl√≠cita                                            |
| `?:` (Elvis)         | Valor **pode ser falsy**, mas **n√£o null/undefined**                  |
| `??` (Null Coalesce) | Valor **pode n√£o existir ou ser `null`**, mas `0` ou `''` s√£o v√°lidos |
