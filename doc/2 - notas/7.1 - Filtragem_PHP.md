# Introdu√ß√£o
Este documento em como principal objetivo espec√≠ficar e aprofundar um pouco mais nos m√©todos de filtragem do php

## O que s√£o filtros em PHP?

Filtros s√£o fun√ß√µes/mecanismos do PHP para validar ou sanitizar dados de entrada, como:

- Vari√°veis comuns

- Dados de formul√°rios ($_GET, $_POST)

- Dados externos (API, JSON)

## Principais Filtros

| Fun√ß√£o                 | Para que serve                                                              |
| ---------------------- | --------------------------------------------------------------------------- |
| `filter_var()`         | Filtra uma vari√°vel **individual**                                          |
| `filter_var_array()`   | Filtra **v√°rias vari√°veis** (array)                                         |
| `filter_input()`       | Filtra vari√°vel vinda de `INPUT` (`GET`, `POST`, `COOKIE`, `SERVER`, `ENV`) |
| `filter_input_array()` | Filtra **v√°rias vari√°veis** direto de `INPUT`                               |

## SINTAXE GERAL

### filter_var():
```php
<?php
    $resultado = filter_var($variavel, FILTER_TYPE, [op√ß√µes]);
?>
```

Exemplo: 

```php
<?php
    $email = "exemplo@dominio.com";
    if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
        echo "Email v√°lido!";
    } else {
        echo "Email inv√°lido!";
    }
?>
```
---

### filter_input()

```php
<?php
    $idade = filter_input(INPUT_GET, 'idade', FILTER_VALIDATE_INT);
?>
```

Tipos de INPUT:
- INPUT_GET;
- INPUT_POST;
- INPUT_COOKIE;
- INPUT_SERVER;
- INPUT_ENV;

---

### filter_var_array()

```php
<?php
    $dados = [
    'idade' => '25',
    'email' => 'teste@abc.com'
    ];

    $resultado = filter_var_array($dados, [
    'idade' => FILTER_VALIDATE_INT,
    'email' => FILTER_VALIDATE_EMAIL
    ]);

    var_dump($resultado);
    ?>
```

---

### filter_input_array()


```php
<?php
    $campos = [
    'nome' => FILTER_SANITIZE_STRING,
    'email' => FILTER_VALIDATE_EMAIL
    ];

    $resultado = filter_input_array(INPUT_POST, $campos);
?>
```

---

## Principais tipos de filtros (FILTER_*)

### üìç üîí Valida√ß√£o

| Filtro                    | Descri√ß√£o                                               |
| ------------------------- | ------------------------------------------------------- |
| `FILTER_VALIDATE_INT`     | Valida se √© **inteiro**                                 |
| `FILTER_VALIDATE_FLOAT`   | Valida se √© **float**                                   |
| `FILTER_VALIDATE_BOOLEAN` | Valida se √© **booleano** (`true`, `false`, `on`, `off`) |
| `FILTER_VALIDATE_EMAIL`   | Valida formato de **e-mail**                            |
| `FILTER_VALIDATE_IP`      | Valida **IPv4/IPv6**                                    |
| `FILTER_VALIDATE_URL`     | Valida **URL**                                          |
| `FILTER_VALIDATE_DOMAIN`  | Valida dom√≠nio                                          |
| `FILTER_VALIDATE_REGEXP`  | Valida por **express√£o regular**                        |

###  üßº Sanitiza√ß√£o

| Filtro                          | Descri√ß√£o                                                                                                    |
| ------------------------------- | ------------------------------------------------------------------------------------------------------------ |
| `FILTER_SANITIZE_STRING`        | Remove tags HTML, caracteres especiais (OBS: DEPRECATED no PHP 8.1 ‚Äî use `htmlspecialchars` ou regex custom) |
| `FILTER_SANITIZE_EMAIL`         | Remove caracteres inv√°lidos de um email                                                                      |
| `FILTER_SANITIZE_URL`           | Remove caracteres inv√°lidos de uma URL                                                                       |
| `FILTER_SANITIZE_NUMBER_INT`    | Remove tudo exceto `+ - 0-9`                                                                                 |
| `FILTER_SANITIZE_NUMBER_FLOAT`  | Remove tudo exceto `+ - . e 0-9`                                                                             |
| `FILTER_SANITIZE_SPECIAL_CHARS` | Codifica caracteres especiais                                                                                |
| `FILTER_SANITIZE_ENCODED`       | URL-encode uma string                                                                                        |


### Diferen√ßa entre validate e sanitize

| Opera√ß√£o      | O que faz                                       |
| ------------- | ----------------------------------------------- |
| **Validar**   | Verifica se o dado atende **crit√©rios formais** |
| **Sanitizar** | Limpa/remover caracteres indesejados            |



## Filtragem com express√µes regulares

```php
<?php
$dados = 'ABCD1234';
$validado = filter_var($dados, FILTER_VALIDATE_REGEXP, [
  'options' => ['regexp' => '/^[A-Z]{4}[0-9]{4}$/']
]);

var_dump($validado); // ABCD1234 ou false
?>
```
---

## Op√ß√µes e flags

### üìç Como usar op√ß√µes extras

```php
<?php
    $numero = '150';

    $resultado = filter_var($numero, FILTER_VALIDATE_INT, [
    'options' => [
        'min_range' => 1,
        'max_range' => 100
    ]
    ]);

    var_dump($resultado); // false (fora do range)
?>
```

### üìç Flags √∫teis

```php
<?php
    $email = "<b>teste@email.com</b>";
    $limpo = filter_var($email, FILTER_SANITIZE_EMAIL, FILTER_FLAG_STRIP_HIGH);

    echo $limpo; // teste@email.com
?>
```

---

## Boas pr√°ticas

‚úÖ Sempre valide entrada externa: $_GET, $_POST, $_COOKIE
‚úÖ Combine sanitize + validate quando necess√°rio.
‚úÖ Para dados complexos, use filter_input_array com todos os campos de uma vez.
‚úÖ Evite FILTER_SANITIZE_STRING em PHP 8.1+ ‚Äî use htmlspecialchars/strip_tags manualmente.
‚úÖ Documente filtros pra cada par√¢metro na sua API.

## Exemplo real (formul√°rio)

```php
<?php

// HTML: <form method="post"><input name="email"></form>

    $email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);

    if ($email === false) {
        echo "Email inv√°lido!";
    } else {
        echo "Email v√°lido: $email";
    }

?>
```

## RESUMO 

| Fun√ß√£o               | Contexto                 |
| -------------------- | ------------------------ |
| `filter_var`         | Vari√°vel isolada         |
| `filter_input`       | Direto do `INPUT`        |
| `filter_var_array`   | V√°rias vari√°veis (array) |
| `filter_input_array` | V√°rios campos de entrada |

## Conclus√£o

filter_* √© sua primeira camada de defesa para validar e limpar dados antes de persistir no banco ou usar na aplica√ß√£o.
Combine sempre com valida√ß√µes de regras de neg√≥cio, prepared statements no banco de dados e encoding seguro na sa√≠da.

