# Atributos e M√©todos Est√°ticos em PHP

## Introdu√ß√£o Conceitual

Na programa√ß√£o orientada a objetos, cada objeto criado a partir de uma classe possui seu pr√≥prio estado interno (atributos com valores espec√≠ficos).

Entretanto, h√° situa√ß√µes em que determinados dados ou comportamentos n√£o pertencem a uma inst√¢ncia, mas sim √† classe em si ‚Äî ou seja, s√£o comuns a todas as inst√¢ncias.

√â para isso que servem os membros est√°ticos.

üß† Defini√ß√£o formal:

Um membro static (atributo ou m√©todo) √© associado √† classe e n√£o ao objeto.
Isso significa que ele pertence ao tipo, e n√£o √† inst√¢ncia desse tipo.

## Atributos Est√°ticos (Static Properties)

‚úÖ Sintaxe:
```php
class Classe {
    public static int $contador = 0;
}
```

- S√£o declarados com a palavra-chave static.

- Pertencem √† classe, n√£o ao objeto.

- S√£o acessados com o operador de resolu√ß√£o de escopo :: (n√£o com ->).

## Diferen√ßa Fundamental

| Tipo                  | Pertence a         | Acesso com | Mant√©m estado individual?         |
| --------------------- | ------------------ | ---------- | --------------------------------- |
| **Atributo comum**    | Objeto (inst√¢ncia) | `->`       | ‚úÖ Sim                             |
| **Atributo est√°tico** | Classe             | `::`       | ‚ùå N√£o ‚Äî √© compartilhado por todos |

## Exmeplo Pr√°tico 
```php
<?php

    class Usuario {
        public static int $totalUsuarios = 0;
        public string $nome;

        public function __construct(string $nome) {
            $this->nome = $nome;
            self::$totalUsuarios++; // incrementa o contador global da classe
        }

        public static function getTotalUsuarios(): int {
            return self::$totalUsuarios;
        }
    }

    $u1 = new Usuario("Carlos");
    $u2 = new Usuario("Guilherme");
    $u3 = new Usuario("Ana");

    echo "Total de usu√°rios criados: " . Usuario::getTotalUsuarios();
?>
```

#### Explica√ß√£o Cient√≠fica

O atributo self::$totalUsuarios √© compartilhado entre todas as inst√¢ncias.
Cada vez que o construtor √© chamado, o mesmo contador √© incrementado.

Mesmo que voc√™ destrua $u1 ou $u2, o valor permanece na classe, pois n√£o depende de objetos vivos.

Isso simula o comportamento de vari√°veis globais, mas dentro do contexto seguro da classe.

## Operador :: (Resolu√ß√£o de Escopo)

O operador :: √© usado para acessar membros est√°ticos, constantes de classe e m√©todos da pr√≥pria classe.

```php
self::$atributo;        // acesso interno √† classe atual
ClassePai::metodo();    // acesso direto √† superclasse
static::metodo();       // acesso din√¢mico (late static binding)
```
üî¨ Cientificamente, :: define um v√≠nculo l√©xico (ou din√¢mico) com a classe no momento de execu√ß√£o.

Esse comportamento √© conhecido como resolu√ß√£o tardia de liga√ß√£o est√°tica (late static binding), e √© fundamental para o polimorfismo est√°tico em PHP.

## M√©todos Est√°ticos

M√©todos marcados como static tamb√©m pertencem √† classe, n√£o ao objeto.

```php
<?php

class Calculadora {
    public static function somar(float $a, float $b): float {
        return $a + $b;
    }

    public static function multiplicar(float $a, float $b): float {
        return $a * $b;
    }
}

echo Calculadora::somar(10, 5);        // 15
echo "<br>";
echo Calculadora::multiplicar(3, 4);   // 12
```

üîç Perceba:

N√£o h√° necessidade de instanciar new Calculadora().
Esses m√©todos s√£o funcionais e independentes de estado.


## Quando Usar Membros Est√°ticos

| Situa√ß√£o                                                     | Use `static`? | Justificativa                                 |
| ------------------------------------------------------------ | ------------- | --------------------------------------------- |
| O valor ou comportamento √© **comum a todos os objetos**      | ‚úÖ Sim         | Exemplo: contador global, cache, configura√ß√£o |
| O m√©todo **n√£o depende de atributos da inst√¢ncia** (`$this`) | ‚úÖ Sim         | Exemplo: fun√ß√µes matem√°ticas, utilit√°rios     |
| O m√©todo precisa acessar dados **espec√≠ficos do objeto**     | ‚ùå N√£o         | Deve usar atributos normais e `$this`         |
| Precisa de **polimorfismo e heran√ßa din√¢mica**               | ‚ö†Ô∏è Depende    | Pode usar `static::` (late static binding)    |

## self vs static (Diferen√ßa Sutil e Importante)

| Palavra-chave | Tipo de liga√ß√£o                             | Heran√ßa respeitada? | Exemplo                                      |
| ------------- | ------------------------------------------- | ------------------- | -------------------------------------------- |
| `self::`      | Liga√ß√£o **est√°tica** (fixa na classe atual) | ‚ùå N√£o               | Usa a defini√ß√£o da classe onde foi declarado |
| `static::`    | Liga√ß√£o **tardia (din√¢mica)**               | ‚úÖ Sim               | Usa a classe que realmente chamou o m√©todo   |

### Exemplo comparativo:
```php
<?php

    class Pai {
        public static function quemSou() {
            echo "Sou a classe " . __CLASS__ . "<br>";
        }

        public static function testar() {
            self::quemSou();
            static::quemSou();
        }
    }

    class Filho extends Pai {
        public static function quemSou() {
            echo "Sou a classe " . __CLASS__ . "<br>";
        }
    }

    Filho::testar();
```

Explica√ß√£o:

    self:: ‚Üí fixo em Pai, liga√ß√£o est√°tica.

    static:: ‚Üí segue a classe que chamou (Filho), liga√ß√£o tardia.

üß† Isso √© o chamado Late Static Binding, e permite polimorfismo est√°tico ‚Äî um conceito avan√ßado da OOP em PHP.

## Atributos Est√°ticos e Encapsulamento

Mesmo est√°ticos, os atributos devem respeitar modificadores de acesso:

```php
class Config {
    private static string $chaveAPI;

    public static function setChave(string $valor): void {
        self::$chaveAPI = $valor;
    }

    public static function getChave(): string {
        return self::$chaveAPI;
    }
}

Config::setChave("ABC123");
echo Config::getChave();
```

‚úÖ Boas pr√°ticas:

- Sempre usar getters/setters est√°ticos para proteger vari√°veis globais.

- Evitar acesso direto a atributos public static.

## Cuidados e M√°s Pr√°ticas

‚ö†Ô∏è Evite abusar de membros est√°ticos.
Eles s√£o √∫teis, mas perigosos quando usados incorretamente, pois:

Reduzem a coes√£o da classe (misturam responsabilidades).

Introduzem estado global oculto (dif√≠cil de testar).

Quebram o princ√≠pio da responsabilidade √∫nica (SRP).

Dificultam testes unit√°rios e mocking.

‚úÖ Use-os somente quando o comportamento realmente pertence √† classe, e n√£o √†s inst√¢ncias.

## Caso Real de Aplica√ß√£o

Um uso muito comum de atributos est√°ticos √© em padr√µes de projeto, como Singleton e Factory.

### Exemplo: Singleton

```php
class Conexao {
    private static ?Conexao $instancia = null;

    private function __construct() {
        echo "Conex√£o criada!<br>";
    }

    public static function getInstancia(): Conexao {
        if (self::$instancia === null) {
            self::$instancia = new Conexao();
        }
        return self::$instancia;
    }
}

$con1 = Conexao::getInstancia();
$con2 = Conexao::getInstancia();

var_dump($con1 === $con2); // true ‚Äî mesma inst√¢ncia
```

#### Explica√ß√£o t√©cnica:

- O construtor √© privado, impedindo new Conexao().

- getInstancia() retorna sempre a mesma refer√™ncia, armazenada em self::$instancia.

- Isso garante uma √∫nica inst√¢ncia global ‚Äî ideal para conex√µes de banco ou gerenciadores de configura√ß√£o

## Conclus√£o Cient√≠fica

Os membros est√°ticos (static) representam dados e comportamentos associados ao tipo, n√£o √† inst√¢ncia.

Eles s√£o implementados na √°rea de dados est√°tica do runtime e s√£o acess√≠veis via resolu√ß√£o de escopo (::), sem depend√™ncia de contexto de objeto.

Em termos te√≥ricos:

- S√£o a materializa√ß√£o de atributos de classe (n√£o de objeto).

- Facilitam o compartilhamento de estado global controlado.

- Devem ser usados com modera√ß√£o e encapsulamento rigoroso.

### Em resumo 

| Conceito          | Palavra-chave      | Acesso | Pertence a | Exemplo de uso                   |
| ----------------- | ------------------ | ------ | ---------- | -------------------------------- |
| Atributo comum    | `$this->atributo`  | Objeto | Inst√¢ncia  | Nome, idade, saldo               |
| Atributo est√°tico | `self::$atributo`  | Classe | Tipo       | Contadores, cache, configura√ß√µes |
| M√©todo comum      | `$obj->metodo()`   | Objeto | Inst√¢ncia  | `depositar()`, `falar()`         |
| M√©todo est√°tico   | `Classe::metodo()` | Classe | Tipo       | `somar()`, `getInstancia()`      |
