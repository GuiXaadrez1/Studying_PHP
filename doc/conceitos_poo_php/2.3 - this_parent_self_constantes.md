# Introdu√ß√£o

A Programa√ß√£o Orientada a Objetos (POO) em PHP fornece diferentes mecanismos para acessar membros de uma classe (atributos e m√©todos), dependendo do contexto de execu√ß√£o e do n√≠vel de heran√ßa.

Entre os operadores mais importantes est√£o:

- -> : Operador de acesso a membros de inst√¢ncias.

- $this : Refer√™ncia ao objeto atual dentro de uma classe.

- self:: : Resolu√ß√£o est√°tica de escopo para acessar membros da pr√≥pria classe.

- parent:: : Resolu√ß√£o hier√°rquica de escopo para acessar membros da classe pai.

Esses operadores comp√µem o n√∫cleo sem√¢ntico da resolu√ß√£o de nomes e heran√ßa comportamental na POO em PHP.

## O Operador -> (Access Operator)

### Defini√ß√£o

O operador -> √© utilizado para acessar propriedades e m√©todos de uma inst√¢ncia de objeto.

#### Sintaxe
```php
$objeto->metodo();
$objeto->atributo;
```

- Exemplo:

```php
class Usuario {
    public string $nome = "Guilherme";

    public function exibirNome() {
        echo $this->nome;
    }
}

$u = new Usuario();
$u->exibirNome(); // Sa√≠da: Guilherme
```

#### Funcionamento interno

O operador -> indica ao interpretador que:

- $u √© uma inst√¢ncia (objeto).

- exibirNome() deve ser buscado no escopo do objeto.

- O m√©todo √© invocado em tempo de execu√ß√£o (runtime).

Em resumo: o -> conecta a inst√¢ncia real com seu contexto de execu√ß√£o.

## O Identificador $this

### Defini√ß√£o

$this √© uma vari√°vel interna especial que faz refer√™ncia √† inst√¢ncia atual de uma classe.
Ela s√≥ existe dentro do contexto de um objeto, nunca em m√©todos est√°ticos.

```php
<?php

    class Conta {
        private float $saldo = 1000;

        public function sacar(float $valor) {
            $this->saldo -= $valor;
            echo "Saldo atual: {$this->saldo}";
        }
    }

    $c = new Conta();
    $c->sacar(200); // Sa√≠da: Saldo atual: 800
```

Aqui, $this->saldo refere-se ao atributo $saldo pertencente √† inst√¢ncia atual.

#### Caracter√≠sticas`

| Caracter√≠stica | Descri√ß√£o                                         |
| -------------- | ------------------------------------------------- |
| Escopo         | S√≥ existe em m√©todos de inst√¢ncia                 |
| Contexto       | Refere-se ao objeto concreto em execu√ß√£o          |
| Uso            | Acesso a propriedades e m√©todos do pr√≥prio objeto |
| Inexistente em | M√©todos est√°ticos                                 |


#### Exemplo de erro

```php
class Teste {
    public static function exemplo() {
        echo $this->valor; // ERRO! $this n√£o existe em contexto est√°tico
    }
}
```

Conclus√£o:

$this pertence ao mundo das inst√¢ncias (runtime), enquanto self:: pertence ao mundo das classes (compile time).

## O Operador self::

### Defini√ß√£o

self:: √© o operador de resolu√ß√£o de escopo est√°tico, usado para acessar membros est√°ticos, constantes e m√©todos da pr√≥pria classe.

Ele n√£o depende de inst√¢ncias, e sim da defini√ß√£o da classe em tempo de compila√ß√£o.

#### Sintaxe:

```php
self::$propriedade_estatica
self::metodoEstatico()
self::CONSTANTE
````

- Exemplo:

```php
class Configuracao {
    public static string $appName = "Sistema X";

    public static function mostrarNome() {
        echo self::$appName;
    }
}

Configuracao::mostrarNome(); // Sa√≠da: Sistema X
```

#### Caracter√≠ticas

| Caracter√≠stica | Descri√ß√£o                                                              |
| -------------- | ---------------------------------------------------------------------- |
| Contexto       | Classe (n√£o inst√¢ncia)                                                 |
| Escopo         | Est√°tico                                                               |
| Resolu√ß√£o      | Feita **em tempo de compila√ß√£o**                                       |
| Acesso         | `self::` acessa membros da **classe atual**, e **n√£o da classe filha** |

#### Importante: Resolu√ß√£o Est√°tica Tardia

Por padr√£o, self:: n√£o respeita heran√ßa din√¢mica ‚Äî ele √© vinculado √† classe onde foi definido, n√£o √† classe que o chama.

Exemplo ilustrativo:

```php
class Pai {
    public static function quemSou() {
        echo "Pai\n";
    }

    public static function chamar() {
        self::quemSou();
    }
}

class Filho extends Pai {
    public static function quemSou() {
        echo "Filho\n";
    }
}

Filho::chamar(); // Sa√≠da: Pai
```

Por qu√™?

Porque self:: faz a resolu√ß√£o em tempo de compila√ß√£o, vinculando-se √† classe Pai.

Para heran√ßa din√¢mica, usa-se static:: (t√≥pico que veremos em seguida).

## O Operador parent::

### Defini√ß√£o

parent:: √© utilizado para acessar m√©todos ou propriedades da classe pai (superclasse) ‚Äî seja para reutilizar comportamentos ou estender implementa√ß√µes.

- Exemplo:

```php
class Pai {
    protected function saudacao() {
        echo "Ol√°, sou o Pai\n";
    }
}

class Filho extends Pai {
    public function saudacao() {
        parent::saudacao(); // chama m√©todo do Pai
        echo "E eu sou o Filho\n";
    }
}

$f = new Filho();
$f->saudacao();
```

#### Caracter√≠sticas

| Caracter√≠stica | Descri√ß√£o                                              |
| -------------- | ------------------------------------------------------ |
| Contexto       | Heran√ßa (classe filha ‚Üí classe pai)                    |
| Escopo         | Est√°tico                                               |
| Fun√ß√£o         | Invocar m√©todos, construtores ou propriedades herdadas |
| Resolu√ß√£o      | Sempre **um n√≠vel acima** na hierarquia                |

#### Uso comum no construtor

```php
class Usuario {
    public function __construct() {
        echo "Construtor do Pai\n";
    }
}

class Admin extends Usuario {
    public function __construct() {
        parent::__construct(); // executa construtor do pai
        echo "Construtor do Filho\n";
    }
}

$a = new Admin();
```

## Comparativo T√©cnico

| Operador   | Contexto  | Tipo de Acesso | Resolu√ß√£o           | Escopo       | Exemplo de Uso     |
| ---------- | --------- | -------------- | ------------------- | ------------ | ------------------ |
| `$this->`  | Inst√¢ncia | Din√¢mico       | Tempo de execu√ß√£o   | Objeto atual | `$this->metodo()`  |
| `self::`   | Classe    | Est√°tico       | Tempo de compila√ß√£o | Classe atual | `self::CONSTANTE`  |
| `parent::` | Heran√ßa   | Est√°tico       | Tempo de compila√ß√£o | Classe pai   | `parent::metodo()` |

## Resolu√ß√£o Est√°tica Tardia (Late Static Binding)

PHP introduziu o operador static:: para corrigir a limita√ß√£o de self:: em contextos de heran√ßa.

Exemplo Comparativo:

```php
class Pai {
    public static function quemSou() {
        echo "Sou o Pai\n";
    }

    public static function teste() {
        static::quemSou(); // late static binding
    }
}

class Filho extends Pai {
    public static function quemSou() {
        echo "Sou o Filho\n";
    }
}

Filho::teste(); // Sa√≠da: Sou o Filho
```

üîπ Enquanto self:: chama o m√©todo da classe onde foi declarado,
üîπ static:: chama o m√©todo da classe que executa o c√≥digo (resolu√ß√£o din√¢mica).

## Diagrama Conceitual

```bash
+-------------------------+
|        Classe Pai       |
|--------------------------|
| - atributos              |
| + metodo()               |
| + metodoEstatico()       |
+-----------^--------------+
            |
            |
+-------------------------+
|       Classe Filho      |
|--------------------------|
| + metodo()               |
|--------------------------|
| Usa:                     |
| - $this->  ‚Üí objeto      |
| - self::   ‚Üí classe filha|
| - parent:: ‚Üí classe pai  |
+--------------------------+
```

## Boas Pr√°ticas

- Use $this para acessar propriedades e m√©todos da inst√¢ncia atual.

- Use self:: apenas quando a chamada n√£o deve ser sobrescrita por subclasses.

- Use parent:: sempre que quiser reaproveitar l√≥gica da superclasse.

- Evite misturar $this e self:: no mesmo m√©todo ‚Äî eles representam contextos diferentes.

- Prefira static:: a self:: quando o m√©todo puder ser sobrescrito e voc√™ quiser manter o polimorfismo est√°tico.

## Exemplo Completo:

```php
<?php
class Animal {
    public function som() {
        echo "Algum som gen√©rico\n";
    }

    public static function especie() {
        echo "Animal indefinido\n";
    }
}

class Cachorro extends Animal {
    public function som() {
        parent::som(); // chama o som gen√©rico
        echo "Latido\n";
    }

    public static function especie() {
        echo "Cachorro\n";
    }

    public function exibirTudo() {
        $this->som();           // inst√¢ncia
        self::especie();        // classe atual (sem heran√ßa din√¢mica)
        parent::especie();      // classe pai
    }
}

$c = new Cachorro();
$c->exibirTudo();
```

## Conclus√£o

Os operadores $this->, self::, e parent:: s√£o fundamentais para o controle de escopo e heran√ßa em PHP.

Eles definem como e de onde m√©todos e propriedades s√£o acessados ‚Äî seja do objeto em execu√ß√£o, da classe est√°tica ou da superclasse.

Compreender suas diferen√ßas √© essencial para dominar:

- Polimorfismo din√¢mico

- Heran√ßa comportamental

- Encapsulamento hier√°rquico

- Resolu√ß√£o est√°tica tardia

## Refer√™ncias

PHP Manual ‚Äî Language Reference > Classes and Objects > Scope Resolution Operator
https://www.php.net/manual/en/language.oop5.paamayim-nekudotayim.php

Fowler, M. Refactoring: Improving the Design of Existing Code. Addison-Wesley, 2018.

Liskov, B. & Guttag, J. Program Development in Java: Abstraction, Specification, and Object-Oriented Design. MIT Press, 2001.

Gamma, E. et al. Design Patterns. Addison-Wesley, 1994.